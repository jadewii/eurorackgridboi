<!DOCTYPE html>
<html>
<head>
    <title>EURORACK.GRID - Module Packs</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Mono:wght@400;700&display=swap" rel="stylesheet">
    <script src="auth-check.js"></script>
    <script src="purchase-integration-fixed.js" defer></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: 'Noto Sans Mono', monospace;
            background: #f5f5f5;
            color: #000;
        }
        
        .main-content {
            padding: 100px 40px 40px;
            max-width: 1400px;
            margin: 0 auto;
        }
        
        /* Header */
        .page-header {
            text-align: center;
            margin-bottom: 60px;
        }
        
        .page-title {
            font-size: 4rem;
            font-weight: bold;
            letter-spacing: 5px;
            margin-bottom: 20px;
        }
        
        .page-subtitle {
            font-size: 1.2rem;
            color: #666;
            margin-bottom: 30px;
        }
        
        /* Pack Info Banner */
        .info-banner {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            border-radius: 10px;
            margin-bottom: 50px;
            text-align: center;
        }
        
        .info-banner h2 {
            font-size: 1.8rem;
            margin-bottom: 15px;
        }
        
        .info-banner p {
            font-size: 1.1rem;
            opacity: 0.95;
        }
        
        /* Packs Grid */
        .packs-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 30px;
            margin-bottom: 50px;
        }
        
        .pack-card {
            background: white;
            border: 3px solid #000;
            border-radius: 10px;
            overflow: hidden;
            transition: all 0.3s;
            cursor: pointer;
            position: relative;
        }
        
        .pack-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        .pack-display {
            padding: 30px;
            background: #1a1a1a;
            position: relative;
            min-height: 200px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        /* Visual rack representation */
        .rack-visual {
            background: #000;
            border: 3px solid #444;
            border-radius: 5px;
            padding: 15px;
            display: grid;
            gap: 2px;
            width: 100%;
            max-width: 250px;
        }
        
        .rack-visual.small {
            grid-template-columns: repeat(2, 1fr);
            grid-template-rows: repeat(1, 60px);
        }
        
        .rack-visual.medium {
            grid-template-columns: repeat(3, 1fr);
            grid-template-rows: repeat(2, 60px);
        }
        
        .rack-visual.large {
            grid-template-columns: repeat(4, 1fr);
            grid-template-rows: repeat(2, 60px);
        }
        
        .rack-visual.xl {
            grid-template-columns: repeat(4, 1fr);
            grid-template-rows: repeat(4, 60px);
        }
        
        .module-slot {
            background: linear-gradient(135deg, #333, #222);
            border: 1px solid #555;
            border-radius: 2px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #666;
            font-size: 1.5rem;
            transition: all 0.3s;
        }
        
        .module-slot:nth-child(odd) {
            animation: pulse 3s infinite;
            animation-delay: 0s;
        }
        
        .module-slot:nth-child(even) {
            animation: pulse 3s infinite;
            animation-delay: 1.5s;
        }
        
        @keyframes pulse {
            0%, 100% { 
                background: linear-gradient(135deg, #333, #222);
                box-shadow: none;
            }
            50% { 
                background: linear-gradient(135deg, #444, #333);
                box-shadow: 0 0 10px rgba(255, 215, 0, 0.3);
            }
        }
        
        /* Pack Info */
        .pack-info {
            padding: 25px;
            background: white;
        }
        
        .pack-name {
            font-size: 1.8rem;
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        .pack-size {
            display: inline-block;
            padding: 5px 12px;
            background: #000;
            color: #FFD700;
            font-size: 0.9rem;
            font-weight: bold;
            margin-bottom: 15px;
            text-transform: uppercase;
        }
        
        .pack-description {
            color: #666;
            margin-bottom: 20px;
            line-height: 1.5;
        }
        
        .pack-features {
            list-style: none;
            margin-bottom: 20px;
        }
        
        .pack-features li {
            padding: 8px 0;
            border-bottom: 1px solid #eee;
            display: flex;
            justify-content: space-between;
        }
        
        .pack-features li:last-child {
            border-bottom: none;
        }
        
        .feature-label {
            color: #999;
            font-size: 0.9rem;
        }
        
        .feature-value {
            font-weight: bold;
        }
        
        .pack-price {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-top: 20px;
            border-top: 2px solid #000;
        }
        
        .price-amount {
            font-size: 1.5rem;
            font-weight: bold;
        }
        
        .buy-button {
            padding: 12px 30px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 5px;
            font-weight: bold;
            cursor: pointer;
            text-transform: uppercase;
            transition: all 0.3s;
        }
        
        .buy-button:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }
        
        /* Special Offers */
        .special-badge {
            position: absolute;
            top: 15px;
            right: 15px;
            background: #FFD700;
            color: #000;
            padding: 5px 15px;
            font-weight: bold;
            font-size: 0.8rem;
            transform: rotate(5deg);
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            z-index: 10;
        }
        
        .best-value {
            background: #00ff00;
        }
        
        /* Info Cards */
        .info-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 50px;
        }
        
        .info-card {
            background: white;
            padding: 25px;
            border: 2px solid #000;
            border-radius: 8px;
            text-align: center;
        }
        
        .info-icon {
            font-size: 2.5rem;
            margin-bottom: 15px;
        }
        
        .info-title {
            font-weight: bold;
            margin-bottom: 10px;
            text-transform: uppercase;
        }
        
        .info-text {
            color: #666;
            font-size: 0.9rem;
        }
    </style>
</head>
<body>
    <!-- Navigation will be inserted here -->
    
    <div class="main-content">
        <!-- Header -->
        <div class="page-header">
            <h1 class="page-title">MODULE PACKS</h1>
            <p class="page-subtitle">Get random modules at a discount - Perfect for filling your cases!</p>
        </div>
        
        <!-- Info Banner -->
        <div class="info-banner">
            <h2>ðŸŽ² Mystery Module Packs</h2>
            <p>Each pack contains random modules sized to perfectly fit your case. The bigger the pack, the better the value!</p>
        </div>
        
        <!-- Packs Grid -->
        <div class="packs-grid">
            <!-- Starter Pack - 2 Modules -->
            <div class="pack-card" onclick="buyPack('starter', 2, 400)">
                <div class="pack-display">
                    <div class="rack-visual small">
                        <div class="module-slot">?</div>
                        <div class="module-slot">?</div>
                    </div>
                </div>
                <div class="pack-info">
                    <h3 class="pack-name">Starter Pack</h3>
                    <span class="pack-size">2 Modules</span>
                    <p class="pack-description">Perfect for beginners or trying out the system</p>
                    <ul class="pack-features">
                        <li>
                            <span class="feature-label">Module Count</span>
                            <span class="feature-value">2 Random</span>
                        </li>
                        <li>
                            <span class="feature-label">Fits Case</span>
                            <span class="feature-value">2HP Pod</span>
                        </li>
                        <li>
                            <span class="feature-label">Value</span>
                            <span class="feature-value">200ðŸ¥œ each</span>
                        </li>
                    </ul>
                    <div class="pack-price">
                        <span class="price-amount">400 ðŸ¥œ</span>
                        <button class="buy-button">Buy Pack</button>
                    </div>
                </div>
            </div>
            
            <!-- Essential Pack - 6 Modules -->
            <div class="pack-card" onclick="buyPack('essential', 6, 1000)">
                <span class="special-badge">POPULAR</span>
                <div class="pack-display">
                    <div class="rack-visual medium">
                        <div class="module-slot">?</div>
                        <div class="module-slot">?</div>
                        <div class="module-slot">?</div>
                        <div class="module-slot">?</div>
                        <div class="module-slot">?</div>
                        <div class="module-slot">?</div>
                    </div>
                </div>
                <div class="pack-info">
                    <h3 class="pack-name">Essential Pack</h3>
                    <span class="pack-size">6 Modules</span>
                    <p class="pack-description">Great value for building your first complete voice</p>
                    <ul class="pack-features">
                        <li>
                            <span class="feature-label">Module Count</span>
                            <span class="feature-value">6 Random</span>
                        </li>
                        <li>
                            <span class="feature-label">Fits Case</span>
                            <span class="feature-value">42HP Happy Ending</span>
                        </li>
                        <li>
                            <span class="feature-label">Value</span>
                            <span class="feature-value">167ðŸ¥œ each</span>
                        </li>
                        <li>
                            <span class="feature-label">Savings</span>
                            <span class="feature-value" style="color: #00cc00;">Save 200ðŸ¥œ</span>
                        </li>
                    </ul>
                    <div class="pack-price">
                        <span class="price-amount">1,000 ðŸ¥œ</span>
                        <button class="buy-button">Buy Pack</button>
                    </div>
                </div>
            </div>
            
            <!-- Pro Pack - 8 Modules -->
            <div class="pack-card" onclick="buyPack('pro', 8, 1200)">
                <div class="pack-display">
                    <div class="rack-visual large">
                        <div class="module-slot">?</div>
                        <div class="module-slot">?</div>
                        <div class="module-slot">?</div>
                        <div class="module-slot">?</div>
                        <div class="module-slot">?</div>
                        <div class="module-slot">?</div>
                        <div class="module-slot">?</div>
                        <div class="module-slot">?</div>
                    </div>
                </div>
                <div class="pack-info">
                    <h3 class="pack-name">Pro Pack</h3>
                    <span class="pack-size">8 Modules</span>
                    <p class="pack-description">Fill a 3U 60HP case with a complete system</p>
                    <ul class="pack-features">
                        <li>
                            <span class="feature-label">Module Count</span>
                            <span class="feature-value">8 Random</span>
                        </li>
                        <li>
                            <span class="feature-label">Fits Case</span>
                            <span class="feature-value">3U 60HP</span>
                        </li>
                        <li>
                            <span class="feature-label">Value</span>
                            <span class="feature-value">150ðŸ¥œ each</span>
                        </li>
                        <li>
                            <span class="feature-label">Savings</span>
                            <span class="feature-value" style="color: #00cc00;">Save 400ðŸ¥œ</span>
                        </li>
                    </ul>
                    <div class="pack-price">
                        <span class="price-amount">1,200 ðŸ¥œ</span>
                        <button class="buy-button">Buy Pack</button>
                    </div>
                </div>
            </div>
            
            <!-- Studio Pack - 16 Modules -->
            <div class="pack-card" onclick="buyPack('studio', 16, 2000)">
                <span class="special-badge best-value">BEST VALUE</span>
                <div class="pack-display">
                    <div class="rack-visual xl">
                        <div class="module-slot">?</div>
                        <div class="module-slot">?</div>
                        <div class="module-slot">?</div>
                        <div class="module-slot">?</div>
                        <div class="module-slot">?</div>
                        <div class="module-slot">?</div>
                        <div class="module-slot">?</div>
                        <div class="module-slot">?</div>
                        <div class="module-slot">?</div>
                        <div class="module-slot">?</div>
                        <div class="module-slot">?</div>
                        <div class="module-slot">?</div>
                        <div class="module-slot">?</div>
                        <div class="module-slot">?</div>
                        <div class="module-slot">?</div>
                        <div class="module-slot">?</div>
                    </div>
                </div>
                <div class="pack-info">
                    <h3 class="pack-name">Studio Pack</h3>
                    <span class="pack-size">16 Modules</span>
                    <p class="pack-description">Complete 6U system - Everything you need!</p>
                    <ul class="pack-features">
                        <li>
                            <span class="feature-label">Module Count</span>
                            <span class="feature-value">16 Random</span>
                        </li>
                        <li>
                            <span class="feature-label">Fits Case</span>
                            <span class="feature-value">6U 84HP</span>
                        </li>
                        <li>
                            <span class="feature-label">Value</span>
                            <span class="feature-value">125ðŸ¥œ each</span>
                        </li>
                        <li>
                            <span class="feature-label">Savings</span>
                            <span class="feature-value" style="color: #00cc00;">Save 1,200ðŸ¥œ</span>
                        </li>
                        <li>
                            <span class="feature-label">Bonus</span>
                            <span class="feature-value" style="color: #FFD700;">+1 Rare Module</span>
                        </li>
                    </ul>
                    <div class="pack-price">
                        <span class="price-amount">2,000 ðŸ¥œ</span>
                        <button class="buy-button">Buy Pack</button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Info Cards -->
        <div class="info-cards">
            <div class="info-card">
                <div class="info-icon">ðŸŽ²</div>
                <div class="info-title">Random Selection</div>
                <div class="info-text">Each pack contains a random selection of modules from our entire collection</div>
            </div>
            <div class="info-card">
                <div class="info-icon">ðŸ“¦</div>
                <div class="info-title">Perfect Fit</div>
                <div class="info-text">Pack sizes match standard Eurorack case configurations</div>
            </div>
            <div class="info-card">
                <div class="info-icon">ðŸ’°</div>
                <div class="info-title">Better Value</div>
                <div class="info-text">The more modules you buy, the more you save per module</div>
            </div>
            <div class="info-card">
                <div class="info-icon">âš¡</div>
                <div class="info-title">Instant Delivery</div>
                <div class="info-text">Modules are added to your collection immediately after purchase</div>
            </div>
        </div>
    </div>
    
    <script>
        // Module pool for random selection
        const modulePool = [
            'Complex Oscillator', 'Varigated', 'Function Synthesizer',
            'Physical Modeler', 'Textural Synthesizer', 'Cephalopod Rose',
            'Altered Black', 'Voltaged Gray', 'Mangler Tangler',
            'Jacknut', 'Honduh', 'Bai', 'Andersons',
            'Filter Bank', 'Quad VCA', 'Envelope Generator',
            'LFO Bank', 'Sequencer', 'Clock Divider', 'Mixer',
            'Effects Processor', 'Granular Sampler', 'Wave Folder',
            'Ring Modulator', 'Noise Source', 'Random Generator',
            'Quantizer', 'Arpeggiator', 'Delay Line', 'Reverb Tank'
        ];
        
        function buyPack(packType, moduleCount, price) {
            // Check if user is logged in
            const userData = localStorage.getItem('eurogrid_user');
            if (!userData) {
                alert('Please login to purchase module packs!');
                window.location.href = '/login.html';
                return;
            }
            
            // Check jamnutz balance
            const currentNutz = parseInt(localStorage.getItem('jamnutz') || '0');
            
            if (currentNutz < price) {
                alert(`Not enough jamnutz! You need ${price}ðŸ¥œ but only have ${currentNutz}ðŸ¥œ`);
                return;
            }
            
            if (confirm(`Buy ${packType} pack (${moduleCount} modules) for ${price}ðŸ¥œ?`)) {
                // Deduct jamnutz
                localStorage.setItem('jamnutz', (currentNutz - price).toString());
                
                // Generate random modules
                const receivedModules = [];
                for (let i = 0; i < moduleCount; i++) {
                    const randomModule = modulePool[Math.floor(Math.random() * modulePool.length)];
                    receivedModules.push(randomModule);
                }
                
                // Add bonus rare module for studio pack
                if (packType === 'studio') {
                    receivedModules.push('âœ¨ RARE: Golden Oscillator');
                }
                
                // Add to user's collection
                const user = JSON.parse(userData);
                if (!user.modules) user.modules = [];
                receivedModules.forEach(module => {
                    user.modules.push(module);
                });
                localStorage.setItem('eurogrid_user', JSON.stringify(user));
                
                // Show results
                alert(`ðŸŽ‰ Pack opened! You received:\n\n${receivedModules.join('\n')}\n\nCheck your collection!`);
                
                // Refresh to update UI
                window.location.reload();
            }
        }
        
        // Update jamnutz display
        document.addEventListener('DOMContentLoaded', () => {
            const jamnutz = localStorage.getItem('jamnutz') || '0';
            // Update any jamnutz displays on the page
        });
    </script>
</body>
</html>